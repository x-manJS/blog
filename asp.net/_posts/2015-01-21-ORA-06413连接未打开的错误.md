---
layout: post
title: ORA-06413连接未打开的错误的原因和解决方法
tags: oracle system.data.oracleclient ORA06413
---

有个网站程序，在64位机子上可以连接mssql，连不了oracle。把程序放在32位的机子上，mssql和oracle都可以连接。那么问题来了。


详细描述：

启动程序，查询的时候，程序报错**ORA-06413连接未打**。 

遇到这样的提示，都无语了。讲了等于什么都没讲。

解决过程： 省略，很操蛋的我没能解决。最后请求大神指导。ps.网络上说的什么')'的原因这边无效。

## 错误原因

先检查下，连接Oracle是不是使用的dll是System.Data.OraceClient，如果是，那么问题就在这儿了。（如果不是，对不起，这篇文章帮不了你。）因为System.Data.OraceClient是非托管的，最终调用的是oracle客户端的**oci.dll**来连接数据库的。而oci.dll有分32位和64位。

最好的解决方法是把System.Data.OraceClient改为odp（用nuget安装），因为odp是托管的，不需要调用oci.dll来连接Oracle。

但是如果没法改的话（比如我，用别人的框架， 没法改），那么参考下面的两个解决方案。

## 解决方案一

代码运行，默认用的是IIS Express，这货没法设置。改为IIS本地来运行开发。

1. vs右击启动项，属性，web，然后如图

![](/images/asp.net/1.png)

2. 在IIS中创建网站程序，自己定义端口号，然后吧启动地址写入到上图的那个输入框。  
3. 在IIS中，进入应用进程池，右击新建的那个应用进程池，选中**高级属性**，设置如图
  
![](/images/asp.net/2.jpg)

这样就可以了，在vs中调试，就不会报错了。

这个方法我试过，是可以的，但是大神也说了，这方法毕竟不是很好的。最好的就是替换成odp。

## 解决方案二

这个方法我试过，没什么效果，但还是写出来。因为可能是因为oci.dll版本的问题，所以下载这个文件：
[http://pan.baidu.com/s/1i39ruDJ](http://pan.baidu.com/s/1i39ruDJ)

解压后，把oci的路径放在环境变量中。这个是oracle的客户端。 ps.我马马虎虎的试过了，没用，你看着办。


