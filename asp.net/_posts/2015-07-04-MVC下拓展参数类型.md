---
layout: post
title: MVC下拓展参数类型
tags: mvc4 参数拓展
---

之前在 [http://liaozenghui.com/asp.net/2015/01/25/MVC%E7%9A%84ModelBinder.html](http://liaozenghui.com/asp.net/2015/01/25/MVC%E7%9A%84ModelBinder.html)说过webapi的绑定。

今天看了下mvc的参数类型绑定。

1.我需要绑定`List<int>`控制器参数类型。

2.我写了个类：

	 public class ListModelBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            ValueProviderResult result = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

            string[] valueList = result.AttemptedValue.Trim(',').Split(',');

            List<int> intList = new List<int>();
            foreach (string val in valueList)
            {
                intList.Add(int.Parse(val));
            }
            //bindingContext.Model = intList;
            return intList;
        }
    }

3.注册到路由器`app_start/RouteConfigl类`
	
	ModelBinders.Binders.Add(typeof(List<int>), new ListModelBinder());

4.写控制器测试

	public class test{
	   public string TestList(List<int> ids)
        {
            return string.Join(":", ids);
        }
	}

5.测试结果

	请求地址：http://localhost/test/testlist?ids=4343,43434

输出：

	4343:43434
	
